define("alinw/i18n/0.0.5/i18n",["alinw/jquery/1.8.3/jquery","gallery/underscore/1.5.2/underscore","arale/class/1.1.0/class","arale/cookie/1.0.2/cookie","gallery/jsuri/1.2.2/jsuri"],function(a){"use strict";var b=a("alinw/jquery/1.8.3/jquery"),c=a("gallery/underscore/1.5.2/underscore"),d=a("arale/class/1.1.0/class"),e=a("arale/cookie/1.0.2/cookie"),f=a("gallery/jsuri/1.2.2/jsuri"),g=d.create({options:{translation:{},cookieName:"jsi18n",languageParameterName:"lang",priorities:["userSpecified","parameter","cookie","browser"],attribute:"i18n",attributePosition:"i18n-where",userSpecifiedLanguage:null},translation:{},initialize:function(){},getLanguage:function(){var a=this,b=null;return c.each(a.options.priorities,function(d){c.isString(b)&&b.length>0||("userSpecified"===d?b=a.getLanguageFromUserSpecified():"parameter"===d?b=a.getLanguageFromUri():"cookie"===d?b=a.getLanguageFromCookie():"browser"===d&&(b=a.getLanguageFromNavigator()))}),b},init:function(a){var d=this;c.isObject(a)&&b.extend(!0,d.options,a),c.each(d.options.translation,function(a,e){var f=e.toLowerCase();c.has(d.translation,f)||(d.translation[f]={}),b.extend(!0,d.translation[f],a)});var f=d.getLanguageFromUri();f&&e.set(d.options.cookieName,f,{path:"/"})},getLanguageFromNavigator:function(){return window.navigator.language?window.navigator.language:window.navigator.browserLanguage?window.navigator.browserLanguage:window.navigator.userLanguage?window.navigator.userLanguage:window.navigator.systemLanguage?window.navigator.systemLanguage:null},getLanguageFromCookie:function(){var a=this;return e.get(a.options.cookieName)},getLanguageFromUri:function(){var a=this,b=new f(window.location.href);return b.getQueryParamValue(a.options.languageParameterName)},getLanguageFromUserSpecified:function(){var a=this;return a.options.userSpecifiedLanguage},doTranslation:function(a){var d=this,e=b(a);e.find("[data-"+d.options.attribute+"]").each(function(){var a=b(this),e=a.data(d.options.attribute),f=a.data(d.options.attributePosition);if(c.isString(e)&&!(e.length<=0)){var g=d.getText(e);c.isString(f)?"prepend"===f?a.html(g+a.html()):"append"===f&&a.html(a.html()+g):a.html(g)}})},getText:function(a){var b=this,d=b.getLanguage();d=d.toLowerCase();var e={};c.isObject(b.translation[d])&&(e=b.translation[d]);for(var f=a.split("."),g=null,h=e;f.length>0;)g=f.shift(),c.has(h,g)&&(h=h[g]);return c.isString(h)||(h=a),h}});return new g});
